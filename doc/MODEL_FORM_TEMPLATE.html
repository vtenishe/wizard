<!--
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                              â•‘
â•‘       AMPS FIELD-MODEL INPUT FORM â€” REUSABLE TEMPLATE                        â•‘
â•‘                                                                              â•‘
â•‘  PURPOSE:                                                                    â•‘
â•‘    This template defines the standard layout for a magnetic field model's    â•‘
â•‘    driving-parameter input form in the AMPS web wizard.  It is extracted     â•‘
â•‘    from the T96 implementation and is intended to be copy-pasted and         â•‘
â•‘    customised for any new Tsyganenko-family (or similar) empirical model.    â•‘
â•‘                                                                              â•‘
â•‘  THE TEMPLATE HAS FOUR PARTS:                                                â•‘
â•‘    PART A â€” HTML: driver-parameter input form   (goes in index.html)         â•‘
â•‘    PART B â€” HTML: keyword-preview strip rows    (goes in index.html)         â•‘
â•‘    PART C â€” JavaScript: logic functions         (goes in js/03-bgfield.js)   â•‘
â•‘    PART D â€” Integration checklist: hooks in     state, init, selector, CSS   â•‘
â•‘                                                                              â•‘
â•‘  NAMING CONVENTION:                                                          â•‘
â•‘    Throughout, "XX" is the lowercase model tag  (e.g. t96, t01, ta15).       â•‘
â•‘    "XX" in HTML ids becomes the prefix:  id="XX-dst", id="XX-pdyn", etc.     â•‘
â•‘    "XX" in JS becomes the function prefix: xxChange(), validateXX(), etc.    â•‘
â•‘    "MODEL" is the UPPERCASE model key:  T96, T01, TA15, TS07D, etc.         â•‘
â•‘    Replace every occurrence of XX / MODEL with your actual model tag/key.    â•‘
â•‘                                                                              â•‘
â•‘  REFERENCE IMPLEMENTATION:                                                   â•‘
â•‘    T96 in index.html lines ~1660â€“1730                                        â•‘
â•‘    T96 in js/03-bgfield.js  (t96Change, validateT96, presets, parser)        â•‘
â•‘                                                                              â•‘
â•‘  LAST UPDATED: 2026-02-25                                                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-->


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PART A â€” HTML FORM
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

     WHERE TO INSERT:
       Inside the Step 3 panel in index.html, after the model-selector card
       grid and alongside the other model forms (ts05-form, t96-form, etc.).

     DISPLAY LOGIC:
       The form starts hidden (display:none).  selectFieldModel('MODEL') in
       JS will set display:block when the user clicks the model's card.

     LAYOUT STRUCTURE:
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  TITLE â€” coloured uppercase label                       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚  INFOBOX â€” orange hint with example preset values       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚  ROW 1 â€” 4-column grid of primary required inputs       â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
       â”‚  â”‚ Param 1  â”‚ Param 2  â”‚ Param 3  â”‚ Epoch    â”‚          â”‚
       â”‚  â”‚ (req *)  â”‚ (req *)  â”‚ (req *)  â”‚          â”‚          â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚  ROW 2 â€” optional / secondary parameters                â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
       â”‚  â”‚ Param 4  â”‚ Param 5  â”‚  (opt)                         â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚  ADVANCED â€” collapsible <details> section               â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
       â”‚  â”‚ Preset buttons   â”‚   Parse-from-text area     â”‚      â”‚
       â”‚  â”‚ Parsed readout line                            â”‚      â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

     EACH INPUT FIELD has three sub-elements:
       1. <input>         â€” the actual value; has oninput="xxChange()"
       2. <div class="field-note"> â€” live validation status (âœ“/âš /âœ—)
       3. <div class="hint">       â€” static help text (always visible)

     CSS CLASSES ON <input> (set by validation JS):
       .valid  â†’ green border   (value within recommended range)
       .warn   â†’ orange border  (outside recommended but within hard limits)
       .bad    â†’ red border     (outside hard limits â€” likely typo)
       .error  â†’ red border     (alias used by some models)
       These classes are toggled dynamically; set the initial class to
       match the default value (usually "valid").

     LABEL BADGES:
       <span class="req">*</span>   â€” red asterisk, marks a required field
       <span class="opt">opt</span> â€” grey "opt" tag, marks an optional field
       <span class="unit">[nT]</span> â€” unit label (not uppercased by CSS)
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->


    <!-- â”€â”€ MODEL form: REPLACE "XX" and "MODEL" everywhere â”€â”€ -->
    <div id="XX-form" style="display:none;">

      <!-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
           â•‘  TITLE                                               â•‘
           â•‘  Appears as bright-blue uppercase text above the     â•‘
           â•‘  form.  Give it an id so JS can update it at         â•‘
           â•‘  runtime (e.g. if two models share the same form).   â•‘
           â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div id="XX-label"
           style="font-size:11px;
                  font-weight:700;
                  color:var(--accent-bright);
                  text-transform:uppercase;
                  letter-spacing:.4px;
                  margin-bottom:8px;">
        MODEL Driving Parameters
      </div>


      <!-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
           â•‘  INFOBOX â€” example preset values                     â•‘
           â•‘  Orange background.  Give the user a quick sense     â•‘
           â•‘  of "what numbers should I type?".                   â•‘
           â•‘                                                      â•‘
           â•‘  Colour variants:  info-orange, info-blue,           â•‘
           â•‘                    info-green, info-red               â•‘
           â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div class="infobox info-orange">
        <b>Example presets:</b>
        <span style="color:var(--text-dim)">quiet</span>
          (Param1 â‰ˆ VAL1, Param2 â‰ˆ VAL2, Param3 â‰ˆ VAL3) and
        <span style="color:var(--text-dim)">storm</span>
          (Param1 â‰ˆ VAL4, Param2 â‰ˆ VAL5, Param3 â‰ˆ VAL6).
        Use OMNI/CCMC iSWA values for event runs.
      </div>


      <!-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
           â•‘  ROW 1 â€” primary inputs                              â•‘
           â•‘                                                      â•‘
           â•‘  .frow      = CSS grid row container                 â•‘
           â•‘  .c4        = 4 equal columns (also: c2, c3, c5)    â•‘
           â•‘  .field     = single labelled-input wrapper          â•‘
           â•‘                                                      â•‘
           â•‘  Responsive: at â‰¤700 px â†’ 2 columns                 â•‘
           â•‘              at â‰¤480 px â†’ 1 column                   â•‘
           â•‘                                                      â•‘
           â•‘  FILL IN: one <div class="field"> per parameter.     â•‘
           â•‘  The last column is typically Epoch (datetime).       â•‘
           â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div class="frow c4">

        <!-- â”€â”€ FIELD: Parameter 1 (required) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
             ANATOMY OF A FIELD:
               <label>
                 Human name
                 <span class="unit">[UNIT]</span>     â† physical unit
                 <span class="req">*</span>           â† required marker
               </label>
               <input
                 id="XX-PARAM"                  â† unique DOM id
                 type="number"                  â† "number" or "datetime-local"
                 value="DEFAULT"                â† initial default value
                 step="STEP"                    â† spinner increment
                 min="HARD_MIN" max="HARD_MAX"  â† browser hard limits
                 class="valid"                  â† initial validation state
                 oninput="xxChange()"           â† fires on every keystroke
               />
               <div id="XX-PARAM-status"        â† validation status text
                    class="field-note"
                    style="color:var(--green);">
                 âœ“ Within normal range           â† initial status message
               </div>
               <div class="hint">
                 Static helper text.             â† always visible
               </div>
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <div class="field">
          <label>Param1 <span class="unit">[UNIT]</span> <span class="req">*</span></label>
          <input id="XX-param1" type="number"
                 value="DEFAULT" step="STEP" min="HARD_MIN" max="HARD_MAX"
                 class="valid"
                 oninput="xxChange()"/>
          <div id="XX-param1-status" class="field-note"
               style="color:var(--green);">&#10003; Within normal range</div>
          <div class="hint">Brief physics description of this parameter.</div>
        </div>

        <!-- â”€â”€ FIELD: Parameter 2 (required) â”€â”€ -->
        <div class="field">
          <label>Param2 <span class="unit">[UNIT]</span> <span class="req">*</span></label>
          <input id="XX-param2" type="number"
                 value="DEFAULT" step="STEP" min="HARD_MIN" max="HARD_MAX"
                 class="valid"
                 oninput="xxChange()"/>
          <div id="XX-param2-status" class="field-note"
               style="color:var(--green);">&#10003; Within normal range</div>
          <div class="hint">Brief physics description of this parameter.</div>
        </div>

        <!-- â”€â”€ FIELD: Parameter 3 (required) â”€â”€ -->
        <div class="field">
          <label>Param3 <span class="unit">[UNIT]</span> <span class="req">*</span></label>
          <input id="XX-param3" type="number"
                 value="DEFAULT" step="STEP" min="HARD_MIN" max="HARD_MAX"
                 class="valid"
                 oninput="xxChange()"/>
          <div id="XX-param3-status" class="field-note"
               style="color:var(--green);">&#10003; Within normal range</div>
          <div class="hint">Brief physics description of this parameter.</div>
        </div>

        <!-- â”€â”€ FIELD: Epoch (datetime, no validation status) â”€â”€
             The Epoch field uses type="datetime-local" and has no
             status badge because any valid datetime is acceptable.
             It does NOT get a .req or .opt badge â€” it is simply
             always present.
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <div class="field">
          <label>Epoch <span class="unit">[UTC]</span></label>
          <input id="XX-epoch" type="datetime-local"
                 value="2017-09-10T16:00"
                 oninput="xxChange()"/>
          <div class="hint">Snapshot timestamp for STEADY_STATE mode.</div>
        </div>

      </div><!-- /.frow c4 â€” end of Row 1 -->


      <!-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
           â•‘  ROW 2 â€” optional / secondary inputs                 â•‘
           â•‘                                                      â•‘
           â•‘  Same .frow c4 grid, but only fill as many columns   â•‘
           â•‘  as you need.  Empty columns will just be blank      â•‘
           â•‘  space â€” do NOT add invisible placeholder divs.      â•‘
           â•‘                                                      â•‘
           â•‘  Use <span class="opt">opt</span> to mark these as   â•‘
           â•‘  optional in the label.                               â•‘
           â•‘                                                      â•‘
           â•‘  If your model has NO optional parameters, delete    â•‘
           â•‘  this entire <div class="frow c4"> block.            â•‘
           â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div class="frow c4">

        <div class="field">
          <label>Param4 <span class="unit">[UNIT]</span> <span class="opt">opt</span></label>
          <input id="XX-param4" type="number"
                 value="DEFAULT" step="STEP" min="HARD_MIN" max="HARD_MAX"
                 class="valid"
                 oninput="xxChange()"/>
          <div id="XX-param4-status" class="field-note"
               style="color:var(--green);">&#10003; Within normal range</div>
          <div class="hint">Brief physics description.</div>
        </div>

        <div class="field">
          <label>Param5 <span class="unit">[UNIT]</span> <span class="opt">opt</span></label>
          <input id="XX-param5" type="number"
                 value="DEFAULT" step="STEP" min="HARD_MIN" max="HARD_MAX"
                 class="valid"
                 oninput="xxChange()"/>
          <div id="XX-param5-status" class="field-note"
               style="color:var(--green);">&#10003; OK</div>
          <div class="hint">Brief physics description.</div>
        </div>

        <!-- (leave remaining columns empty â€” do NOT pad with hidden divs) -->

      </div><!-- /.frow c4 â€” end of Row 2 -->


      <!-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
           â•‘  ADVANCED SECTION                                     â•‘
           â•‘                                                      â•‘
           â•‘  Collapsible <details> styled as a blue infobox.     â•‘
           â•‘  Contains three sub-parts:                            â•‘
           â•‘    1. Preset buttons â€” quick-fill common scenarios    â•‘
           â•‘    2. Paste area â€” bulk-import from a text record     â•‘
           â•‘    3. Readout line â€” shows what the parser extracted  â•‘
           â•‘                                                      â•‘
           â•‘  The <details> is collapsed by default; user clicks   â•‘
           â•‘  the <summary> triangle to expand it.                 â•‘
           â•‘                                                      â•‘
           â•‘  The overall status message (XX-status) is placed     â•‘
           â•‘  inside the button row with margin-left:auto so it    â•‘
           â•‘  floats to the right.                                 â•‘
           â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <details class="infobox info-blue" style="margin-top:10px;">
        <summary style="cursor:pointer;">
          <b>Advanced:</b> load presets or paste a data record
        </summary>

        <!-- â”€â”€ Description text â”€â”€ -->
        <div style="margin-top:8px; font-size:12px; color:var(--text-dim); line-height:1.35;">
          Use a preset to quickly populate typical quiet or storm-time values,
          or paste a whitespace-separated record with
          <code>Param1</code> [UNIT],
          <code>Param2</code> [UNIT],
          <code>Param3</code> [UNIT],
          <code>Param4</code> [UNIT],
          <code>Param5</code> [UNIT].
          You can also copy shared scalars from any TS05 values already entered.
        </div>

        <!-- â”€â”€ Preset buttons â”€â”€
             Each button calls a JS function that sets all input values
             to a predefined scenario and then calls xxChange() to
             update state + validation + keyword preview.

             The <span id="XX-status"> at the right shows the overall
             validation summary (green / yellow / red) after any change.
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <div style="display:flex;gap:10px;align-items:center;margin-top:8px;flex-wrap:wrap;">
          <button class="btn" type="button" onclick="xxPresetQuiet()">Preset: Quiet</button>
          <button class="btn" type="button" onclick="xxPresetStorm()">Preset: Storm</button>
          <button class="btn" type="button" onclick="xxCopyFromTs05()">Copy from TS05 scalars</button>
          <span id="XX-status"
                style="margin-left:auto;font-size:11px;color:var(--text-dim);"></span>
        </div>

        <!-- â”€â”€ Paste area â”€â”€
             Monospace textarea where user can paste a single line of
             whitespace-separated values.  The placeholder shows the
             expected column order.
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <textarea id="XX-omni-line"
          style="width:100%;
                 height:90px;
                 margin-top:8px;
                 font-family:ui-monospace, SFMono-Regular, Menlo, Monaco,
                             Consolas, 'Liberation Mono', 'Courier New', monospace;
                 font-size:11px;"
          placeholder="PARAM1  PARAM2  PARAM3  PARAM4  PARAM5   (whitespace-separated)">
        </textarea>

        <!-- â”€â”€ Parse button + status â”€â”€ -->
        <div style="display:flex;gap:10px;align-items:center;margin-top:8px;flex-wrap:wrap;">
          <button class="btn" type="button" onclick="parseXXOmniLine()">
            Parse record â†’ MODEL inputs
          </button>
          <span id="XX-omni-status"
                style="font-size:11px;color:var(--text-dim);"></span>
        </div>

        <!-- â”€â”€ Parsed readout â”€â”€
             Shows the extracted values after a successful parse.
             Each <span id="XX-PARAM-read"> is updated by the parser.
             Initial value is an em-dash "â€”".
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <div style="margin-top:8px; font-size:11px; color:var(--text-dim);">
          Parsed values:
          <b>P1</b>=<span id="XX-param1-read">â€”</span> UNIT,
          <b>P2</b>=<span id="XX-param2-read">â€”</span> UNIT,
          <b>P3</b>=<span id="XX-param3-read">â€”</span> UNIT,
          <b>P4</b>=<span id="XX-param4-read">â€”</span> UNIT,
          <b>P5</b>=<span id="XX-param5-read">â€”</span> UNIT.
        </div>

      </details>

    </div><!-- /XX-form -->


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PART A-2 â€” MODEL SELECTOR CARD
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

     WHERE TO INSERT:
       Inside the model-selector grid in index.html (~line 1505).
       Each model gets one card.  The card's onclick calls
       selectFieldModel('MODEL'), which shows the matching form
       and hides all others.

     The "msc-" prefix + lowercase model key forms the card's id.
     selectFieldModel() uses this id to add/remove the .sel class.
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<!--
      <div class="model-sel-card" id="msc-xx" onclick="selectFieldModel('MODEL')">
        <div class="msc-icon">ğŸ”¬</div>
        <div class="msc-title">MODEL â€” Short Description</div>
        <div class="msc-sub">Author (Year). One or two sentence description of the model,
          what it is driven by, and when to use it.</div>
        <div class="msc-badge" style="margin-top:7px;">
          <code style="font-size:10px;color:var(--accent-bright);
                       background:rgba(0,0,0,.3);padding:2px 6px;
                       border-radius:3px;">FIELD_MODEL = MODEL</code>
        </div>
      </div>
-->


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PART B â€” KEYWORD-PREVIEW STRIP ROWS
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

     WHERE TO INSERT:
       Inside the <div class="kw-strip" id="ts05-kw-preview"> block in
       index.html (~line 1850), alongside the other model's kw-rows.

     HOW IT WORKS:
       Each row is a <span class="XX-kw-row"> that starts hidden.
       When the user selects MODEL, selectFieldModel() in JS sets
       display:'' on all .XX-kw-row spans (and display:none on all others).

       Inside each row:
         .kw-key     â€” parameter name  (white, monospace)
         .kw-val     â€” live value      (bright white, id for JS to update)
         .kw-comment â€” inline comment  (dim blue)

     IMPORTANT:
       - Every <span> must be properly closed.
       - Rows must NOT be nested inside another model's rows.
       - The id on .kw-val (e.g. "kv-XX-param1") must match what
         the JS xxChange() function writes to.
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<!--
<span class="XX-kw-row" style="display:none;"><span class="kw-key">PARAM1_KEY</span>          <span class="kw-val" id="kv-XX-param1">DEFAULT</span>    <span class="kw-comment">! UNIT description</span>
</span><span class="XX-kw-row" style="display:none;"><span class="kw-key">PARAM2_KEY</span>          <span class="kw-val" id="kv-XX-param2">DEFAULT</span>    <span class="kw-comment">! UNIT description</span>
</span><span class="XX-kw-row" style="display:none;"><span class="kw-key">PARAM3_KEY</span>          <span class="kw-val" id="kv-XX-param3">DEFAULT</span>    <span class="kw-comment">! UNIT description</span>
</span><span class="XX-kw-row" style="display:none;"><span class="kw-key">PARAM4_KEY</span>          <span class="kw-val" id="kv-XX-param4">DEFAULT</span>    <span class="kw-comment">! UNIT description</span>
</span><span class="XX-kw-row" style="display:none;"><span class="kw-key">PARAM5_KEY</span>          <span class="kw-val" id="kv-XX-param5">DEFAULT</span>    <span class="kw-comment">! UNIT description</span>
</span><span class="XX-kw-row" style="display:none;"><span class="kw-key">EPOCH</span>               <span class="kw-val" id="kv-XX-epoch">2017-09-10T16:00</span> <span class="kw-comment">! UTC snapshot</span>
</span>
-->


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PART C â€” JAVASCRIPT FUNCTIONS
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

     WHERE TO INSERT:
       In js/03-bgfield.js, alongside the other model functions.

     FUNCTIONS TO IMPLEMENT (5 total):
       1. xxChange()        â€” read UI â†’ state â†’ kw preview â†’ validate
       2. validateXX()      â€” range-check each input, set CSS classes
       3. xxPresetQuiet()   â€” fill inputs with quiet-time defaults
       4. xxPresetStorm()   â€” fill inputs with storm-time defaults
       5. parseXXOmniLine() â€” parse pasted text record â†’ inputs
       (+  xxCopyFromTs05() â€” optional convenience copy)

     DEPENDS ON:
       $(id)  â€” alias for document.getElementById  (defined in 01-state.js)
       S      â€” global state object                (defined in 01-state.js)
       updateSidebar() â€” refresh sidebar preview   (defined in 02-wizard.js)
       bndShueUpdate() â€” recompute Shue boundary   (defined in 04-boundary.js)
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<script>
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   FUNCTION 1: xxChange()
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   CALLED BY:  oninput="xxChange()" on every <input> in the XX form.
   PURPOSE:    Sync UI input values â†’ global state S â†’ keyword preview strip.

   FLOW:
     1. Read each input's .value via parseFloat / string
     2. Store into model-specific state keys: S.xxParam1, S.xxParam2, â€¦
     3. Also mirror into generic state keys (S.dst, S.pdyn, S.bz, â€¦)
        so that downstream steps (Shue boundary, Weimer E-field) can
        use them without knowing which model is active.
     4. Update the kw-preview strip <span> elements with formatted values.
     5. Call validateXX() to re-check ranges and colour inputs.
     6. Call updateSidebar() to refresh the right-hand summary panel.
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function xxChange() {
  // â”€â”€ 1. Read UI â†’ model-specific state â”€â”€
  //    Use ?? (nullish coalesce) so that NaN from an empty field
  //    does not overwrite a previously good value.
  S.xxParam1 = parseFloat($('XX-param1')?.value) ?? S.xxParam1;
  S.xxParam2 = parseFloat($('XX-param2')?.value) ?? S.xxParam2;
  S.xxParam3 = parseFloat($('XX-param3')?.value) ?? S.xxParam3;
  S.xxParam4 = parseFloat($('XX-param4')?.value) ?? S.xxParam4;
  S.xxParam5 = parseFloat($('XX-param5')?.value) ?? S.xxParam5;
  S.xxEpoch  = $('XX-epoch')?.value || S.xxEpoch;

  // â”€â”€ 2. Mirror into generic state keys â”€â”€
  //    Only when this model is the active one, so we don't clobber
  //    values from another model the user might switch back to.
  if (S.fieldModel === 'MODEL') {
    S.dst  = Number.isFinite(S.xxParam1) ? S.xxParam1 : S.dst;
    S.pdyn = Number.isFinite(S.xxParam2) ? S.xxParam2 : S.pdyn;
    S.bz   = Number.isFinite(S.xxParam3) ? S.xxParam3 : S.bz;
    S.by   = Number.isFinite(S.xxParam4) ? S.xxParam4 : S.by;
    // â€¦ add more mappings as needed
  }

  // â”€â”€ 3. Update keyword-preview strip â”€â”€
  //    set() is a local helper that writes .textContent into a <span>.
  const set = (id, v) => { const e = $(id); if (e) e.textContent = v; };
  set('kv-XX-param1', Number(S.xxParam1).toFixed(1));   // match decimal places to physics
  set('kv-XX-param2', Number(S.xxParam2).toFixed(2));
  set('kv-XX-param3', Number(S.xxParam3).toFixed(2));
  set('kv-XX-param4', Number(S.xxParam4).toFixed(2));
  set('kv-XX-param5', Number(S.xxParam5).toFixed(1));
  set('kv-XX-epoch',  S.xxEpoch || '');

  // â”€â”€ 4. Validate, refresh sidebar â”€â”€
  validateXX();
  updateSidebar();
}


/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   FUNCTION 2: validateXX()
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   CALLED BY:  xxChange() after every input update.
   PURPOSE:    Three-tier range check on each numeric input.

   VALIDATION TIERS:
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  TIER       â”‚ CSS CLASS â”‚ COLOUR  â”‚ MEANING          â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚  ok range   â”‚ .valid    â”‚ green   â”‚ within model's   â”‚
     â”‚             â”‚           â”‚         â”‚ recommended fit   â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚  warn range â”‚ .warn     â”‚ orange  â”‚ outside recom-   â”‚
     â”‚             â”‚           â”‚         â”‚ mended but phys-  â”‚
     â”‚             â”‚           â”‚         â”‚ ically plausible  â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚  hard range â”‚ .bad      â”‚ red     â”‚ almost certainly  â”‚
     â”‚             â”‚           â”‚         â”‚ a typo or out of  â”‚
     â”‚             â”‚           â”‚         â”‚ model validity    â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   DATA STRUCTURE â€” R (ranges object):
     Each key maps a parameter name to:
       ok:   [min, max]   â€” recommended operating range
       hard: [min, max]   â€” absolute hard limits (beyond = likely error)
       msgOk / msgWarn / msgBad â€” status text for each tier

   FIELDS ARRAY:
     Maps [input-DOM-id, range-key, status-DOM-id] triples so the
     loop can process all fields generically.

   OVERALL STATUS:
     The <span id="XX-status"> in the Advanced section shows a
     summary: green if all OK, yellow if any warn, red if any bad.
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function validateXX() {

  // â”€â”€ Define ranges per parameter â”€â”€
  //    ok:   recommended range (model was fitted to data in this range)
  //    hard: hard limits (beyond this, results are meaningless)
  const R = {
    param1: {
      ok:   [-100, 20],     // â† FILL IN: recommended range
      hard: [-600, 50],     // â† FILL IN: hard limits
      msgOk:   '\u2713 Within normal range',      // âœ“
      msgWarn: '\u26A0 Outside recommended range', // âš 
      msgBad:  '\u2717 Out-of-range'               // âœ—
    },
    param2: {
      ok:   [0.5,  10],
      hard: [0.1,  30],
      msgOk:   '\u2713 Within normal range',
      msgWarn: '\u26A0 Outside recommended range',
      msgBad:  '\u2717 Out-of-range'
    },
    param3: {
      ok:   [-10,  10],
      hard: [-50,  20],
      msgOk:   '\u2713 Within normal range',
      msgWarn: '\u26A0 Outside recommended range',
      msgBad:  '\u2717 Out-of-range'
    },
    param4: {
      ok:   [-10,  10],
      hard: [-40,  40],
      msgOk:   '\u2713 Within normal range',
      msgWarn: '\u26A0 Outside recommended range',
      msgBad:  '\u2717 Out-of-range'
    },
    param5: {
      ok:   [-35,  35],
      hard: [-35,  35],
      msgOk:   '\u2713 OK',
      msgWarn: '\u26A0 Check',
      msgBad:  '\u2717 Out-of-range'
    }
  };

  // â”€â”€ Map: [input-id, range-key, status-div-id] â”€â”€
  const fields = [
    ['XX-param1', 'param1', 'XX-param1-status'],
    ['XX-param2', 'param2', 'XX-param2-status'],
    ['XX-param3', 'param3', 'XX-param3-status'],
    ['XX-param4', 'param4', 'XX-param4-status'],
    ['XX-param5', 'param5', 'XX-param5-status']
  ];

  let anyWarn = false, anyBad = false;

  for (const [id, k, statusId] of fields) {
    const el = $(id);
    const st = $(statusId);
    if (!el) continue;

    const v = parseFloat(el.value);

    // Reset all validation classes first
    el.classList.remove('valid', 'warn', 'bad', 'error');

    // Skip if input is empty / non-numeric
    if (!Number.isFinite(v)) {
      if (st) { st.textContent = ''; st.style.color = 'var(--text-muted)'; }
      continue;
    }

    const [ok0, ok1]   = R[k].ok;
    const [h0,  h1]    = R[k].hard;

    if (v < h0 || v > h1) {
      // â”€â”€ RED: outside hard limits â”€â”€
      el.classList.add('bad');
      anyBad = true;
      if (st) { st.textContent = R[k].msgBad; st.style.color = 'var(--red)'; }
    } else if (v < ok0 || v > ok1) {
      // â”€â”€ ORANGE: outside recommended range â”€â”€
      el.classList.add('warn');
      anyWarn = true;
      if (st) { st.textContent = R[k].msgWarn; st.style.color = 'var(--orange)'; }
    } else {
      // â”€â”€ GREEN: within recommended range â”€â”€
      el.classList.add('valid');
      if (st) { st.textContent = R[k].msgOk; st.style.color = 'var(--green)'; }
    }
  }

  // â”€â”€ Overall summary in the Advanced section â”€â”€
  const st = $('XX-status');
  if (st) {
    if (anyBad) {
      st.textContent = 'Out-of-range: expect unreliable/extrapolated results.';
      st.style.color = 'var(--red)';
    } else if (anyWarn) {
      st.textContent = 'Outside recommended range: use caution (extrapolation).';
      st.style.color = 'var(--yellow)';
    } else {
      st.textContent = 'Within recommended range.';
      st.style.color = 'var(--green)';
    }
  }
}


/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   FUNCTIONS 3 & 4: xxPresetQuiet() / xxPresetStorm()
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   PURPOSE:  One-click fill of all inputs with representative values.
   PATTERN:  Set each input's .value, then call xxChange() once to
             sync state + validate + refresh kw-preview.
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function xxPresetQuiet() {
  const setv = (id, v) => { const e = $(id); if (e) e.value = String(v); };
  setv('XX-param1',  -10);     // â† FILL IN quiet-time values
  setv('XX-param2',    2.0);
  setv('XX-param3',    2.0);
  setv('XX-param4',    0.0);
  setv('XX-param5',    0.0);
  xxChange();
}

function xxPresetStorm() {
  const setv = (id, v) => { const e = $(id); if (e) e.value = String(v); };
  setv('XX-param1', -120);     // â† FILL IN storm-time values
  setv('XX-param2',    8.0);
  setv('XX-param3',  -15.0);
  setv('XX-param4',    5.0);
  setv('XX-param5',    0.0);
  xxChange();
}


/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   FUNCTION 5 (optional): xxCopyFromTs05()
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   PURPOSE:  Copy the shared solar-wind / IMF scalars that the user may
             already have entered for TS05.  Useful for quick A/B model
             comparisons without retyping.
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function xxCopyFromTs05() {
  const setv = (id, v) => { const e = $(id); if (e && Number.isFinite(v)) e.value = String(v); };
  setv('XX-param1', S.dst);    // â† map TS05 state keys to your inputs
  setv('XX-param2', S.pdyn);
  setv('XX-param3', S.bz);
  setv('XX-param4', S.by);
  xxChange();
}


/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   FUNCTION 6: parseXXOmniLine()
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   PURPOSE:  Parse a whitespace-separated text record from the <textarea>
             and populate all input fields + readout spans.

   EXPECTED FORMAT:
     PARAM1  PARAM2  PARAM3  PARAM4  PARAM5
     (whitespace-separated, one line)

   ERROR HANDLING:
     - Empty textarea  â†’ orange "paste first" message
     - Too few columns â†’ red column-count message
     - Parse exception â†’ red error message with details

   ON SUCCESS:
     1. Sets all input .value fields
     2. Updates the readout <span> elements (XX-param1-read, etc.)
     3. Shows green "Parsed OK." status
     4. Calls xxChange() to sync everything
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function parseXXOmniLine() {
  const box = $('XX-omni-line');
  const st  = $('XX-omni-status');
  const setText = (id, v) => { const e = $(id); if (e) e.textContent = v; };

  if (!box) { if (st) st.textContent = '(no input box found)'; return; }

  const raw = (box.value || '').trim();
  if (!raw) {
    if (st) { st.textContent = 'Paste a record line first.'; st.style.color = 'var(--orange)'; }
    return;
  }

  const toks = raw.split(/\s+/);
  // â”€â”€ FILL IN: minimum expected column count â”€â”€
  const MIN_COLS = 4;
  if (toks.length < MIN_COLS) {
    if (st) {
      st.textContent = `Too few columns: got ${toks.length}, expected at least ${MIN_COLS}.`;
      st.style.color = 'var(--red)';
    }
    return;
  }

  try {
    const f = (k) => parseFloat(toks[k]);
    const p1 = f(0), p2 = f(1), p3 = f(2), p4 = f(3);
    const p5 = (toks.length >= 5) ? f(4) : 0.0;   // optional with default

    // Push into UI fields
    const setv = (id, v) => { const e = $(id); if (e) e.value = String(v); };
    setv('XX-param1', p1);
    setv('XX-param2', p2);
    setv('XX-param3', p3);
    setv('XX-param4', p4);
    setv('XX-param5', p5);

    // Update readout spans
    setText('XX-param1-read', p1.toFixed(1));
    setText('XX-param2-read', p2.toFixed(2));
    setText('XX-param3-read', p3.toFixed(2));
    setText('XX-param4-read', p4.toFixed(2));
    setText('XX-param5-read', p5.toFixed(1));

    if (st) { st.textContent = 'Parsed OK.'; st.style.color = 'var(--green)'; }

    xxChange();   // sync state + validate + kw preview
  } catch (e) {
    if (st) {
      st.textContent = 'Parse failed: ' + (e && e.message ? e.message : String(e));
      st.style.color = 'var(--red)';
    }
  }
}
</script>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PART D â€” INTEGRATION CHECKLIST
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

     After creating PARTS A, B, C above, you must hook the new model into
     the existing codebase in FOUR places.  Each is a small, mechanical edit.

     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  HOOK 1: js/01-state.js â€” State defaults                           â”‚
     â”‚                                                                     â”‚
     â”‚  Add default values for your model-specific state keys inside the   â”‚
     â”‚  S = { â€¦ } object.  Follow the existing pattern:                    â”‚
     â”‚                                                                     â”‚
     â”‚    // MODEL defaults                                                â”‚
     â”‚    xxParam1:  DEFAULT,                                              â”‚
     â”‚    xxParam2:  DEFAULT,                                              â”‚
     â”‚    xxParam3:  DEFAULT,                                              â”‚
     â”‚    xxParam4:  DEFAULT,                                              â”‚
     â”‚    xxParam5:  DEFAULT,                                              â”‚
     â”‚    xxEpoch:   '2017-09-10T16:00',                                   â”‚
     â”‚                                                                     â”‚
     â”‚  Also add a comment in the header listing these keys.               â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚  HOOK 2: js/03-bgfield.js â€” selectFieldModel()                     â”‚
     â”‚                                                                     â”‚
     â”‚  THREE small edits inside selectFieldModel():                       â”‚
     â”‚                                                                     â”‚
     â”‚  (a) Add to the forms dictionary:                                   â”‚
     â”‚        const forms = { â€¦, xx: 'XX-form' };                         â”‚
     â”‚                                                                     â”‚
     â”‚  (b) Add an else-if to show the form:                               â”‚
     â”‚        } else if (model === 'MODEL') {                              â”‚
     â”‚          $('XX-form').style.display = 'block';                      â”‚
     â”‚        }                                                            â”‚
     â”‚                                                                     â”‚
     â”‚  (c) Add a kw-row visibility toggle:                                â”‚
     â”‚        document.querySelectorAll('.XX-kw-row').forEach(             â”‚
     â”‚          r => r.style.display = model==='MODEL' ? '' : 'none'      â”‚
     â”‚        );                                                           â”‚
     â”‚                                                                     â”‚
     â”‚  (d) Add to the commentMap:                                         â”‚
     â”‚        MODEL: '! Author (Year)',                                    â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚  HOOK 3: js/09-init.js â€” Startup sync                              â”‚
     â”‚                                                                     â”‚
     â”‚  Add an else-if in the init block so that if the saved state has    â”‚
     â”‚  fieldModel === 'MODEL', the form gets synced on page load:         â”‚
     â”‚                                                                     â”‚
     â”‚    else if (S.fieldModel === 'MODEL') {                             â”‚
     â”‚      if (typeof xxChange === 'function') xxChange();                â”‚
     â”‚    }                                                                â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚  HOOK 4: js/08-review.js â€” Final review output (optional)           â”‚
     â”‚                                                                     â”‚
     â”‚  If the review/export step generates an AMPS_PARAM.in text block,   â”‚
     â”‚  add a case for MODEL that emits the correct keyword lines.         â”‚
     â”‚  This is model-specific; follow the existing TS05/T96 patterns.     â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

     That's it!  With Parts Aâ€“D in place, the new model will:
       âœ“ Appear as a selectable card in Step 3
       âœ“ Show a styled input form when selected
       âœ“ Validate inputs with green/orange/red feedback
       âœ“ Update the keyword-preview strip in real time
       âœ“ Support presets, paste-from-text, and copy-from-TS05
       âœ“ Persist state across wizard steps
       âœ“ Initialize correctly on page load

     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
