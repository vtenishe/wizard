/* =============================================================================
   FILE:    css/02-layout.css
   PROJECT: AMPS CCMC Submission Interface  v3
   PURPOSE: Page-level layout — top navigation bar, page header banner,
            wizard step indicator strip, main two-column grid, section
            (accordion) card chrome, and responsive breakpoints.

   COMPONENTS
     .topbar         — sticky top nav bar (NASA logo + CCMC title + links)
     .page-hd        — full-width gradient banner (model chip, h1, description)
     .model-chip     — animated "live" badge inside the page header
     .wizard         — horizontal scrollable step-indicator strip
     .wz-step        — individual wizard step (numbered circles + labels)
     .layout         — two-column grid: main content (1fr) + sidebar (310px)
     .main-col       — left content column (all wizard step panels)
     .side-col       — right sidebar (run summary + progress bar)
     .sect           — collapsible accordion card used for each wizard step
     .sect-hd        — clickable header row of each section card
     .sect-body      — collapsible content area beneath the header
     .panel-*        — outer wrapper for each numbered wizard step;
                       only the active panel is visible (display:block)
     .submit-bar     — fixed-bottom action bar (Prev / Next / Submit)

   RESPONSIVE
     Below 900 px: sidebar collapses below main content.
     Below 600 px: wizard labels hidden; h1 smaller; submit bar wraps.

   DEPENDS ON: 01-tokens.css
=============================================================================*/
/* ═══════════════════════════════════════════════════════════════════════════
   AMPS CCMC — LAYOUT
   Structural layout: top bar, page header, wizard navigation,
   main content / sidebar two-column grid, submit bar.
═══════════════════════════════════════════════════════════════════════════ */

/* TOP BAR */
.topbar{background:#000810;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:14px;padding:0 24px;height:48px;position:sticky;top:0;z-index:100;}
.tb-nasa{font-size:11px;font-weight:700;background:var(--accent);color:#fff;padding:3px 9px;border-radius:3px;letter-spacing:1.2px;}
.tb-sep{color:var(--border-lit);font-size:18px;}
.tb-title{font-size:12px;color:var(--text-dim);}
.tb-title b{color:var(--accent-bright);font-weight:600;}
.tb-right{margin-left:auto;display:flex;gap:4px;align-items:center;font-size:11px;}
.tb-link{color:var(--text-dim);padding:4px 10px;border-radius:4px;cursor:pointer;text-decoration:none;transition:all .15s;white-space:nowrap;}
.tb-link:hover{color:var(--accent-bright);background:rgba(26,136,212,.1);}
.tb-divider{width:1px;height:20px;background:var(--border);margin:0 4px;}
.tb-badge{background:var(--green-dim);color:var(--green);border:1px solid rgba(45,212,160,.3);border-radius:20px;font-size:10px;font-weight:700;padding:2px 8px;}

/* PAGE HEADER */
.page-hd{background:linear-gradient(135deg,#0e1c30 0%,#070e1c 60%);border-bottom:1px solid var(--border);padding:20px 32px 18px;position:relative;overflow:hidden;}
.page-hd::before{content:'';position:absolute;inset:0;background-image:radial-gradient(circle,rgba(26,136,212,.07) 1px,transparent 1px);background-size:28px 28px;pointer-events:none;}
.page-hd-inner{position:relative;z-index:1;}
.model-chip{display:inline-flex;align-items:center;gap:7px;background:rgba(26,136,212,.1);border:1px solid rgba(26,136,212,.25);border-radius:20px;padding:3px 12px;font-size:11px;font-weight:600;color:var(--accent-bright);letter-spacing:.3px;margin-bottom:10px;}
.pulse{width:7px;height:7px;border-radius:50%;background:var(--green);animation:pulse-anim 2s infinite;flex-shrink:0;}
@keyframes pulse-anim{0%,100%{opacity:1}50%{opacity:.25}}
.page-hd h1{font-size:21px;font-weight:700;color:#fff;margin-bottom:5px;letter-spacing:-.3px;}
.page-hd p{font-size:12px;color:var(--text-dim);max-width:960px;line-height:1.7;}

/* WIZARD NAV */
.wizard{display:flex;background:var(--bg-mid);border-bottom:2px solid var(--border);overflow-x:auto;scrollbar-width:none;}
.wizard::-webkit-scrollbar{display:none;}
.wz-step{display:flex;align-items:center;gap:8px;padding:11px 16px;cursor:pointer;border-bottom:3px solid transparent;white-space:nowrap;font-size:11px;font-weight:600;color:var(--text-dim);transition:all .15s;user-select:none;flex-shrink:0;}
.wz-step:hover{background:rgba(26,136,212,.06);color:var(--text);}
.wz-step.done{border-bottom-color:var(--green);color:var(--green);}
.wz-step.active{border-bottom-color:var(--accent);color:#fff;}
.wz-num{width:22px;height:22px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;flex-shrink:0;}
.wz-step.done .wz-num{background:var(--green);color:#000;}
.wz-step.active .wz-num{background:var(--accent);color:#fff;}
.wz-step:not(.done):not(.active) .wz-num{background:var(--border);color:var(--text-dim);}

/* MAIN GRID */
.layout{display:grid;grid-template-columns:1fr 310px;min-height:calc(100vh - 190px);align-items:start;}
.main-col{padding:24px 28px 40px;min-width:0;}
.side-col{background:var(--bg-panel);border-left:1px solid var(--border);padding:18px 16px;display:flex;flex-direction:column;gap:14px;position:sticky;top:48px;max-height:calc(100vh - 110px);overflow-y:auto;scrollbar-width:thin;}

/* STEP PANELS */
.step-panel{display:none;}
.step-panel.active{display:block;}

/* SECTION CARDS */
.sect{background:var(--bg-panel);border:1px solid var(--border);border-radius:var(--radius-lg);margin-bottom:20px;overflow:hidden;transition:border-color .15s;}
.sect:hover{border-color:var(--border-lit);}
.sect-hd{display:flex;align-items:center;gap:10px;padding:12px 16px;border-bottom:1px solid var(--border);cursor:pointer;user-select:none;transition:background .15s;}
.sect-hd:hover{background:rgba(255,255,255,.015);}
.sect-icon{width:30px;height:30px;border-radius:7px;display:flex;align-items:center;justify-content:center;font-size:14px;flex-shrink:0;}
.sect-title{font-size:13px;font-weight:600;color:#fff;}
.sect-sub{font-size:11px;color:var(--text-dim);margin-left:auto;display:flex;align-items:center;gap:8px;}
.chevron{color:var(--text-dim);font-size:11px;transition:transform .15s;flex-shrink:0;}
.sect.closed .chevron{transform:rotate(-90deg);}
.sect.closed .sect-body{display:none;}
.sect-body{padding:18px;}

/* SUBMIT BAR */
.submit-bar{background:var(--bg-panel);border-top:1px solid var(--border);padding:12px 28px;display:flex;align-items:center;gap:12px;position:sticky;bottom:0;z-index:100;}
.btn-primary{background:var(--accent);color:#fff;font-family:var(--font-sans);font-weight:700;font-size:13px;padding:9px 22px;border:none;border-radius:var(--radius);cursor:pointer;transition:all .15s;}
.btn-primary:hover{background:#1daef0;box-shadow:0 0 16px rgba(26,136,212,.45);}
.btn-primary:disabled{opacity:.4;cursor:not-allowed;box-shadow:none;}
.btn-secondary{background:transparent;border:1px solid var(--border);color:var(--text-dim);font-family:var(--font-sans);font-size:12px;padding:9px 16px;border-radius:var(--radius);cursor:pointer;transition:all .15s;}
.btn-secondary:hover{border-color:var(--accent);color:var(--text);}
.btn-danger{background:transparent;border:1px solid rgba(255,90,90,.4);color:var(--red);font-family:var(--font-sans);font-size:12px;padding:9px 16px;border-radius:var(--radius);cursor:pointer;transition:all .15s;}
.btn-danger:hover{background:rgba(255,90,90,.08);border-color:var(--red);}
.btn-sm{padding:6px 12px;font-size:11px;}
.run-est{margin-left:auto;background:var(--bg-inset);border:1px solid var(--border);border-radius:var(--radius);padding:7px 12px;font-size:11px;color:var(--text-dim);display:flex;gap:10px;}
.run-est b{color:var(--orange);font-family:var(--font-mono);font-weight:600;}

/* RESPONSIVE */
@media(max-width:1100px){.layout{grid-template-columns:1fr 260px;}}
@media(max-width:900px){.layout{grid-template-columns:1fr;}.side-col{position:static;max-height:none;border-left:none;border-top:1px solid var(--border);}}
@media(max-width:600px){.wz-label{display:none;}.page-hd h1{font-size:17px;}.submit-bar{flex-wrap:wrap;}.run-est{margin-left:0;width:100%;}}



/* HELP DROPDOWN MENU (rebuilt) */
.help-dropdown{position:relative;}
.help-trigger{cursor:pointer;user-select:none;}
#help-arrow{font-size:10px;margin-left:2px;transition:transform .2s;}
.docs-dropdown{position:relative;}
.docs-trigger{cursor:pointer;user-select:none;}
#docs-arrow{font-size:10px;margin-left:2px;transition:transform .2s;}
.help-menu{position:absolute;top:100%;right:0;margin-top:8px;min-width:320px;max-width:800px;background:var(--bg-panel);border:1px solid var(--border-lit);border-radius:var(--radius-lg);box-shadow:0 8px 24px rgba(0,0,0,.5);z-index:200;max-height:calc(100vh - 80px);overflow-y:auto;}

/* Level 1: Main Sections */
.help-section{border-bottom:1px solid var(--border-dim);}
.help-section:last-child{border-bottom:none;}
.help-section-header{padding:12px 16px;color:var(--text);font-size:13px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:space-between;transition:background .15s;}
.help-section-header:hover{background:var(--bg-hover);}
.help-label{flex:1;}
.help-toggle{font-size:10px;color:var(--text-dim);transition:transform .2s;margin-left:8px;}
.help-section-content{background:var(--bg-inset);border-top:1px solid var(--border-dim);}

/* Level 2: Subsections */
.help-subsection{border-bottom:1px solid var(--border-dim);}
.help-subsection:last-child{border-bottom:none;}
.help-subsection-header{padding:10px 20px;color:var(--text-dim);font-size:12px;cursor:pointer;display:flex;align-items:center;justify-content:space-between;transition:background .15s;}
.help-subsection-header:hover{background:rgba(255,255,255,.03);}
.help-sublabel{flex:1;}
.help-subsection-content{background:var(--bg-deep);}

/* Level 3: Detail Panels */
.help-detail-panel{padding:16px 20px;color:var(--text);max-height:500px;overflow-y:auto;}
.help-detail-panel h4{font-size:15px;color:var(--accent-bright);margin:0 0 14px 0;border-bottom:1px solid var(--border);padding-bottom:6px;}
.help-detail-panel h5{font-size:12px;color:var(--green);margin:14px 0 6px 0;font-weight:600;}
.help-detail-panel p{margin:5px 0;font-size:11px;line-height:1.6;color:var(--text-dim);}
.help-detail-panel ul{margin:5px 0 5px 18px;font-size:11px;line-height:1.6;color:var(--text-dim);}
.help-detail-panel li{margin:3px 0;}
.help-detail-panel code{background:var(--bg-inset);color:var(--accent-bright);padding:2px 6px;border-radius:3px;font-family:var(--font-mono);font-size:10px;}
.help-detail-panel strong{color:var(--text);font-weight:600;}
.help-detail-panel em{color:var(--text);font-style:italic;}

/* DOCS MENU: Match Help menu typography for PDF links
   Docs uses the same structural classes as Help (help-menu/help-section/help-detail-panel),
   but the PDF links live inside <ul><li><a>... and were inheriting the small (11px) detail-panel list style.
   We override ONLY inside #docs-main-menu so Help content stays unchanged.
*/
#docs-main-menu .help-detail-panel ul{
  font-size:13px;
  line-height:1.6;
  color:var(--text);
  margin:6px 0 6px 0;
  padding-left:0;
  list-style:none;
}
#docs-main-menu .help-detail-panel li{margin:6px 0;}
#docs-main-menu .help-detail-panel a{
  color:var(--accent-bright);
  font-size:13px;
  text-decoration:none;
}
#docs-main-menu .help-detail-panel a:hover{background:var(--bg-hover);color:var(--accent);text-decoration:none;}


.model-section{margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid var(--border-dim);}
.model-section:last-child{border-bottom:none;margin-bottom:0;}

/* Link Sections */
.help-link-section{padding:0;}
.help-link{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;color:var(--accent-bright);font-size:13px;text-decoration:none;transition:background .15s;}
.help-link:hover{background:var(--bg-hover);color:var(--accent);}
.help-external{font-size:14px;margin-left:8px;}
